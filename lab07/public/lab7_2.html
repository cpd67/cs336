<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Lab 7.2</title>
</head>
<body>
	<button id="get-data" class="ui-button ui-widget ui-corner-all">Get Data</button>

    <script src="https://code.jquery.com/jquery-3.1.1.js"></script>    
	
	<script>
 	
	$( document ).ready(function() {
		$("button").click(
			function() {
				// Using the core $.ajax() method
				$.ajax({
					// The URL for the request	
					url: "/hello",	
	
					// Whether this is a POST or GET request
					type: "GET",
					
					// The data to send (will be converted to a query string)
					data: {
						id: "lab7"
					},
				
					// The type of data we expect back
					dataType : "json",
				})
         		// Code to run if the request succeeds (is done);
         		// The response is passed to the function
  				.done(function( json ) {
					$( "<h1>" ).text( json.title ).appendTo( "body" );
					$( "<div class=\"content\">").html( json.html ).appendTo( "body" );
   				})
 	    		// Code to run if the request fails; the raw request and
 	    		// status codes are passed to the function
  				.fail(function( xhr, status, errorThrown ) {
    				alert( "Sorry, there was a problem!" );
    				console.log( "Error: " + errorThrown );
    				console.log( "Status: " + status );
    				console.dir( xhr );
 				})
  				// Code to run regardless of success or failure;
  				.always(function( xhr, status ) {
   					alert( "The request is complete!" );
  				});	
			}
		);
	});
	 
    </script>
</body>
</html>
